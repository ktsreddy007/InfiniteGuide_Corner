# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

stages:
- stage: Restore
  displayName: 'Restore Dependencies'
  jobs:
  - job: RestoreJob
    pool:
      name: Self-Hosted
      demands:
        - Agent.Name -equals localhost
    steps:
    - task: UseDotNet@2
      inputs:
        packageType: 'sdk'
        version: '8.0.x'  # Change based on your .NET version

    - script: dotnet restore YourProject.sln
      displayName: 'Dotnet Restore'

# Stage 2: Build and Compile
- stage: Build
  displayName: 'Build and Compile'
  dependsOn: Restore
  jobs:
  - job: BuildJob
    pool:
      name: Self-Hosted
      demands:
        - Agent.Name -equals localhost
    steps:
    - task: UseDotNet@2
      inputs:
        packageType: 'sdk'
        version: '8.0.x'

    - script: dotnet build InfiniteGuide_Corner.sln --configuration Release
      displayName: 'Dotnet Build'